<% provide(:title, "検索") %>

<%= form_with url: search_path, local: true, method: :get do |f| %>
  <%= f.text_field :keyword, :value => @keyword, placeholder: "キーワードを入力" %>
  <%= f.submit "検索", class: "btn btn-primary" %>
<% end %>

<% if @feed_items.present? %>
  <div class="feed jscroll" >
    <%= render 'shared/feed' %>
  </div>
<% else %>
  <label>検索結果がありません。</label>
<% end %>

<script>
$(window).on('scroll', function() {
  scrollHeight = $(document).height();
  scrollPosition = $(window).height() + $(window).scrollTop();
  if ( (scrollHeight - scrollPosition) / scrollHeight <= 0.05) {
        $('.jscroll').jscroll({
          contentSelector: '.feed',
          nextSelector: 'span.next:last a'
        });
  }
});
</script>